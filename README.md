![Build](https://github.com/readonlyden/GradleTemplate/actions/workflows/ci.yml/badge.svg)

# VkToTel Bot
Бот, написанный на `Java`, перессылающий сообщения (с заданым ключом) из беседы `VK` в канал `Telegram`.
___
## Состав
1. `Gradle` для сборки проекта и управления зависимостями
2. `JUnit 5` для тестов (с примером модульного теста)
3. `Quality` плагин для проверки качества кода
4. *CI/CD* шаблон для автоматизации сборки и развертывания
5. `VK SDK Api` для получения сообщений из ВКонтакте
____
## Руководство пользователя

1. [Создание ботов](#Создание-ботов)
   1. [Создание бота VK](#Создание-бота-VK) 
   2. [Создание бота Telegram](#Создание-бота-Telegram)
2. [Заполнение data.properties](#Заполнение-data.properties)

### Создание ботов
Для перессылки сообщений между сервисами используются боты.
___
#### Создание бота VK
Для создание бота мессенджера VK вам потребуется:
1. Создать сообщество
2. Перейти в "Управление"
3. "Работа с API"
4. "Long Poll API"
5. Выключено перевсти в включить. Версию поставить `5.131`
6. Перейти в панель "Ключи доступа"
7. Создать ключ с доступом к `Управление сообществом` и `Сообщения сообщества`
___
#### Создание бота Telegram
Для создания Telegram бота потребуется:
1. Открыть диалог с `@BotFather`
2. Нажать `/start`
3. Выбрать `/newbot`
4. Выбрать название бота (Можно любое, от его имени будут присылаться сообщения в чат)
5. Выбрать username. (*Обязательно!* должен оканчиаться на *bot*)
6. Далее вам выведется сообщение с удачным созданием бота и `tg_token` (будет иметь маску `1111111111:AAHctHf9ldWeYN5mYsbZSapJwShFwdR7nu8`)
___
### Заполнение data.properties
Для заполнения `data.properties` (`/src/main/resources`) требуется получить следующие 4 параметра и вписать их в файл.
1. `group_id` 
   1. Перейти на страницу сообщества VK.
   2. Перейти в пункт "Управление".
   3. В поле `Адрес` будет ссылка из неё взять цифры после `club`
2. `access_token` - Этот ключ вы получили когда создавали бота VK, в разделе `Ключи доступа`.
3. `tg_token` - Этот ключ вы получили при создании Telegram бота, подробнее в разделе [создания бота Telegram, пункт 6](#Создание-бота-Telegram)
4. `tg_chat_id`
   1. Перейдите в Telegram
   2. Создайте канал (или откройте существующий) в который бот будет пересылать сообщения.
   3. Перейдите в параметры канала и скопируйте ссылку.
   4. Написать `@username_to_id_bot` - `/start`.
   5. Отправить сообщением ссылку на канал Telegram.
   6. В ответ вы получите id. Его записать в `tg_chat_id`.
___